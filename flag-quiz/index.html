<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>国旗クイズ</title>
<style>
    body {
        font-family: Arial, sans-serif;
        margin: 0;
        padding: 20px;
        display: flex;
        justify-content: center;
        background: #f7f7f7;
    }
    #container {
        width: 100%;
        max-width: 800px;
        background: #fff;
        padding: 20px;
        border-radius: 12px;
        box-shadow: 0 0 10px rgba(0,0,0,0.1);
        text-align: center;
    }
    h1, h2 {
        margin-top: 0;
    }
    img {
        width: 100%;
        max-width: 450px;
        height: auto;
        border: 1px solid #ccc;
        margin: 20px 0;
    }
    button {
        display: block;
        width: 90%;
        max-width: 320px;
        margin: 12px auto;
        padding: 16px;
        font-size: 1.2rem;
        border-radius: 10px;
        border: none;
        background: #007BFF;
        color: white;
    }
    #timer {
        font-size: 1.4rem;
        margin-top: 10px;
        font-weight: bold;
    }
</style>
</head>
<body>

<div id="container">

    <!-- タイトル画面 -->
    <div id="titleScreen">
        <h1>国旗クイズ</h1>
        <h2>レベルを選んでください</h2>

        <button onclick="startLevel(1)">レベル1（10問）</button>
        <button onclick="startLevel(2)">レベル2（10問）</button>
        <button onclick="startLevel(3)">レベル3（10問）</button>
        <button onclick="startLevel(4)">レベル4（10問）</button>
        <button onclick="startLevel(5)">レベル5（10問）</button>
        <button onclick="startLevel(6)">レベル6（10問）</button>
    </div>

    <!-- クイズ画面 -->
    <div id="quizScreen" style="display:none;">
        <h2 id="questionNum"></h2>
        <img id="flagImage" src="">
        <h2 id="countryName"></h2>
        <button onclick="nextQuestion()">次へ</button>
        <div id="timer">タイム: 0秒</div>
    </div>

    <!-- 結果画面 -->
    <div id="resultScreen" style="display:none;">
        <h2>終了！</h2>
        <p id="resultTime"></p>
        <button onclick="goTitle()">タイトルに戻る</button>
    </div>

</div>


<script>
// ===== 国データ（レベル別に分割） =====

const levelData = {
    1: [
        ["日本", "jp"], ["アメリカ", "us"], ["カナダ", "ca"],
        ["フランス", "fr"], ["ドイツ", "de"], ["イタリア", "it"],
        ["中国", "cn"], ["韓国", "kr"], ["イギリス", "gb"], ["オーストラリア", "au"]
    ],
    2: [
        ["インド", "in"], ["ブラジル", "br"], ["ロシア", "ru"],
        ["メキシコ", "mx"], ["スペイン", "es"], ["トルコ", "tr"],
        ["サウジアラビア", "sa"], ["スウェーデン", "se"], ["インドネシア", "id"], ["アルゼンチン", "ar"]
    ],
    3: [
        ["ノルウェー", "no"], ["フィンランド", "fi"], ["デンマーク", "dk"],
        ["ポーランド", "pl"], ["ウクライナ", "ua"], ["オランダ", "nl"],
        ["ベルギー", "be"], ["スイス", "ch"], ["オーストリア", "at"], ["チェコ", "cz"]
    ],
    4: [
        ["タイ", "th"], ["マレーシア", "my"], ["ベトナム", "vn"],
        ["フィリピン", "ph"], ["シンガポール", "sg"], ["ニュージーランド", "nz"],
        ["南アフリカ", "za"], ["エジプト", "eg"], ["ケニア", "ke"], ["モロッコ", "ma"]
    ],
    5: [
        ["ギリシャ", "gr"], ["ポルトガル", "pt"], ["アイルランド", "ie"],
        ["ハンガリー", "hu"], ["クロアチア", "hr"], ["ルーマニア", "ro"],
        ["ブルガリア", "bg"], ["セルビア", "rs"], ["スロバキア", "sk"], ["リトアニア", "lt"]
    ],
    6: [
        ["チリ", "cl"], ["コロンビア", "co"], ["ペルー", "pe"],
        ["ベネズエラ", "ve"], ["パキスタン", "pk"], ["バングラデシュ", "bd"],
        ["カタール", "qa"], ["アラブ首長国連邦", "ae"], ["イスラエル", "il"], ["ヨルダン", "jo"]
    ]
};

// ===== グローバル変数 =====
let currentQuestions = [];
let index = 0;
let startTime = 0;
let timerInterval;

// ===== タイトルに戻る =====
function goTitle() {
    document.getElementById("titleScreen").style.display = "block";
    document.getElementById("quizScreen").style.display = "none";
    document.getElementById("resultScreen").style.display = "none";
}

// ===== レベル開始 =====
function startLevel(level) {

    // データコピーしてシャッフル
    currentQuestions = [...levelData[level]]
        .sort(() => Math.random() - 0.5)
        .slice(0, 10);

    index = 0;

    // 画面切り替え
    document.getElementById("titleScreen").style.display = "none";
    document.getElementById("quizScreen").style.display = "block";
    document.getElementById("resultScreen").style.display = "none";

    // タイマー開始
    startTimer();

    showQuestion();
}

// ===== タイマー開始 =====
function startTimer() {
    startTime = Date.now();
    clearInterval(timerInterval);

    timerInterval = setInterval(() => {
        const now = Date.now();
        const sec = Math.floor((now - startTime) / 1000);
        document.getElementById("timer").textContent = `タイム: ${sec}秒`;
    }, 200);
}

// ===== タイマー停止 =====
function stopTimer() {
    clearInterval(timerInterval);
    const totalSec = Math.floor((Date.now() - startTime) / 1000);
    return totalSec;
}

// ===== 問題表示 =====
function showQuestion() {
    const q = currentQuestions[index];
    document.getElementById("questionNum").textContent = `第 ${index + 1} 問`;
    document.getElementById("countryName").textContent = q[0];
    document.getElementById("flagImage").src = `https://flagcdn.com/h240/${q[1]}.png`;
}

// ===== 次へ =====
function nextQuestion() {
    index++;

    if (index >= 10) {
        finishQuiz();
    } else {
        showQuestion();
    }
}

// ===== 結果 =====
function finishQuiz() {
    const sec = stopTimer();

    document.getElementById("quizScreen").style.display = "none";
    document.getElementById("resultScreen").style.display = "block";
    document.getElementById("resultTime").textContent = `タイム：${sec} 秒`;
}

</script>

</body>
</html>
